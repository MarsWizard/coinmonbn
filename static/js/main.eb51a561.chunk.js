(this.webpackJsonpmpui=this.webpackJsonpmpui||[]).push([[0],{138:function(t,e,n){},188:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(45),s=n.n(c),o=(n(138),n(27)),i=n(50),l=n(51),u=n(15),d=n(53),h=n(52),j=n(84),C=n.n(j),b=n(55),v=n(18),p=n(2);function O(t){return null==t?"":t.contractCode}var f=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var a;return Object(i.a)(this,n),(a=e.call(this,t)).state={nearContract:null,farContract:null,contractsDailySeries:{},nearContractDailySeries:null},a.futureWsClient=t.futureWsClient,a.swapWsClient=t.swapWsClient,console.log(t),a.setNearContract=a.setNearContract.bind(Object(u.a)(a)),a.setFarContract=a.setFarContract.bind(Object(u.a)(a)),a.setContracts=a.setContracts.bind(Object(u.a)(a)),a.nearContractCode=a.nearContractCode.bind(Object(u.a)(a)),a.dataToEvents=a.dataToEvents.bind(Object(u.a)(a)),a}return Object(l.a)(n,[{key:"nearContractCode",value:function(){var t=this.state.nearContract;return null==t?"":t.contractCode}},{key:"setNearContract",value:function(t){console.log(t),this.setState({nearContract:t})}},{key:"setFarContract",value:function(t){console.log(t),this.setState({farContract:t})}},{key:"setContracts",value:function(t,e){this.setState({nearContract:t,farContract:e});var n=Date.now();console.log(this.futureWsClient),this.sendQuery(t.contractCode,"1day",Math.floor(n/1e3-86400),Math.floor(n/1e3),this.futureWsClient)}},{key:"sendQuery",value:function(t,e,n,a,r){JSON.stringify({req:"market.".concat(t,".kline.").concat(e),id:"id4",from:n,to:a})}},{key:"dataToEvents",value:function(t){return t.map((function(t,e){return new v.TimeEvent(new Date(1e3*t.id),t)}))}},{key:"updateData",value:function(t){console.log(t);var e=t.rep.match(/market\.([\w\-_]+)\.kline\.1day/);if(null!=e){var n=e[1],a=this.state.contractsDailySeries;a[n]=t.data;var r=this.state.nearContractDailySeries;null!=this.state.nearContract&&n==this.state.nearContract.contractCode&&(r=new v.TimeSeries({name:"near contract daily price",columns:["time","close"],events:this.dataToEvents(t.data)})),this.setState({contractsDailySeries:a,nearContractDailySeries:r})}}},{key:"render",value:function(){var t=this.state.contractsDailySeries[this.nearContractCode()],e=null;if(null!=t&&t.length>0){var n=this.state.nearContractDailySeries;e=Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:[this.state.nearContract.contractCode," Close"]}),Object(p.jsx)(b.ChartContainer,{width:800,timeRange:n.range(),children:Object(p.jsxs)(b.ChartRow,{height:"200",children:[Object(p.jsx)(b.YAxis,{id:"price",label:"Price ($)",min:0,max:n.max("close"),width:"60",format:"$,.2f"}),Object(p.jsx)(b.Charts,{children:Object(p.jsx)(b.LineChart,{columns:["close"],axis:"price",series:n})})]})})]})}return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:[O(this.state.nearContract)," vs ",O(this.state.farContract)]}),e]})}}]),n}(a.Component),x=n(131);function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Number.parseFloat(t).toPrecision(e)}a.Component;var y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,190)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),r(t),c(t),s(t)}))};function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return Number.parseFloat(t).toPrecision(e)}var T=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(t){var a;Object(i.a)(this,n);for(var r={},c=[],s=(a=e.call(this,t)).props.asset,o=[],l=0,u=["perpetual","next_quarter","current_quarter"];l<u.length;l++){var d=u[l],h="".concat(s.toLowerCase(),"usd_").concat(d,"@continuousKline_1d");o.push(h)}for(var j="wss://dstream.binance.com/stream?streams="+o.join("/"),C=0,b=["PERPETUAL","CURRENT_QUARTER","NEXT_QUARTER"];C<b.length;C++){var v=b[C],p={pair:s+"USD",contractCode:"".concat(s,"USD_").concat(v),contractType:v};c.push(p),r[p]=null}return a.state={asset:t.asset,openPrices:{},prices:r,contracts:c,wsUrl:j},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;fetch("https://dapi.binance.com/dapi/v1/exchangeInfo").then((function(t){return t.json()})).then((function(e){t.setState({symbols:e.symbols}),t.deliverySymbolsLoaded()}))}},{key:"deliverySymbolsLoaded",value:function(){for(var t=[],e=this.state.asset,n=[],a=0,r=["PERPETUAL","CURRENT_QUARTER","NEXT_QUARTER"];a<r.length;a++){var c=r[a],s={pair:e+"USD",contractCode:"".concat(e,"USD_").concat(c),contractType:c};t.push(s),n.push(s)}}},{key:"handleData",value:function(t){var e=JSON.parse(t).data,n=e.ps+"_"+e.ct;this.updatePrice(n,parseFloat(e.k.c)),this.updateOpenPrice(n,parseFloat(e.k.o))}},{key:"updatePrice",value:function(t,e){var n=this.state.prices;n[t]=e,this.setState({prices:n})}},{key:"updateOpenPrice",value:function(t,e){var n=this.state.openPrices;n[t]=e,this.setState({openPrices:n})}},{key:"render",value:function(){var t=this.state,e=t.contracts,n=t.prices,a=t.openPrices;return Object(p.jsxs)("div",{children:[Object(p.jsx)(C.a,{url:this.state.wsUrl,onMessage:this.handleData.bind(this)}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{}),Object(p.jsx)("td",{}),e.map((function(t,e){return Object(p.jsx)("td",{children:t.contractCode},"C"+t.contractCode)}))]})}),Object(p.jsx)("tbody",{children:e.map((function(t,r){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.contractCode}),Object(p.jsxs)("td",{children:[S(n[t.contractCode]),"(",S(100*(n[t.contractCode]/a[t.contractCode]-1),3),"%)"]}),e.map((function(e,a){return Object(p.jsxs)("td",{children:[(n[t.contractCode]-n[e.contractCode]).toFixed(4),"(",(n[t.contractCode]/n[e.contractCode]).toFixed(4),")"]},"CC"+t.contractCode+e.contractCode)}))]},"R"+t.contractCode)}))})]})]})}}]),n}(a.Component);s.a.render(Object(p.jsxs)(r.a.StrictMode,{children:[Object(p.jsx)(T,{asset:"BTC"}),Object(p.jsx)(T,{asset:"ETH"}),Object(p.jsx)(T,{asset:"BNB"}),Object(p.jsx)(T,{asset:"XRP"}),Object(p.jsx)(T,{asset:"ADA"}),Object(p.jsx)(T,{asset:"LUNA"}),Object(p.jsx)(T,{asset:"SOL"}),Object(p.jsx)(T,{asset:"DOT"}),Object(p.jsx)(T,{asset:"DOGE"}),Object(p.jsx)(T,{asset:"SHIB"}),Object(p.jsx)(T,{asset:"LTC"})]}),document.getElementById("root")),y()}},[[188,1,2]]]);
//# sourceMappingURL=main.eb51a561.chunk.js.map