(this.webpackJsonpmpui=this.webpackJsonpmpui||[]).push([[0],{15:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(6),o=c.n(a),i=(c(15),c(3)),r=c(7),l=c(8),d=c(2),b=c(10),h=c(9),u=c(5),f=c.n(u),p=c(0),y=c(17),j=function(e){Object(b.a)(c,e);var t=Object(h.a)(c);function c(e){var n;Object(r.a)(this,c),n=t.call(this,e);for(var s={},a=["ETH","BTC","LTC"],o=0,i=a;o<i.length;o++){s[i[o]]=null}return n.state={count:90,prices:s,symbols:a,future_contracts:[{contract_code:"ETH_CW",symbol:"ETH"},{contract_code:"ETH_NW",symbol:"ETH"},{contract_code:"ETH_CQ",symbol:"ETH"},{contract_code:"ETH_NQ",symbol:"ETH"},{contract_code:"BTC_CW",symbol:"BTC"},{contract_code:"BTC_NW",symbol:"BTC"},{contract_code:"BTC_CQ",symbol:"BTC"},{contract_code:"BTC_NQ",symbol:"BTC"},{contract_code:"LTC_CW",symbol:"LTC"},{contract_code:"LTC_NW",symbol:"LTC"},{contract_code:"LTC_CQ",symbol:"LTC"},{contract_code:"LTC_NQ",symbol:"LTC"}],openPrices:{}},n.sendMessage=n.sendMessage.bind(Object(d.a)(n)),n.subscribe=n.subscribe.bind(Object(d.a)(n)),n.updatePrice=n.updatePrice.bind(Object(d.a)(n)),n.sendMessageSwap=n.sendMessageSwap.bind(Object(d.a)(n)),n}return Object(l.a)(c,[{key:"componentDidMount",value:function(){var e,t=this,c=Object(i.a)(this.state.symbols);try{for(c.s();!(e=c.n()).done;){var n=e.value,s=new URL("https://api.hbdm.com/api/v1/contract_contract_info");s.search=new URLSearchParams({symbol:n}),fetch(s).then((function(e){return e.json()})).then((function(e){t.setState({contacts:e})})).catch(console.log)}}catch(a){c.e(a)}finally{c.f()}}},{key:"handleData",value:function(e){var t=this.sendMessage,c=this;e.arrayBuffer().then((function(e){var n=y.inflate(e,{to:"string"}),s=JSON.parse(n);if(s.ping)t(JSON.stringify({pong:s.ping}));else if(s.tick){var a=s.ch.match(/market\.([\w_]+)\.kline\..*/);if(a){var o=a[1];c.updatePrice(o,s.tick)}}}))}},{key:"updatePrice",value:function(e,t){var c=this.state.prices;c[e]=t.close,this.state.openPrices[e]=t.open,this.setState({prices:c})}},{key:"subscribe",value:function(){var e,t=Object(i.a)(this.state.symbols);try{for(t.s();!(e=t.n()).done;)for(var c=e.value,n=0,s=["CW","NW","CQ","NQ"];n<s.length;n++){var a=s[n];this.sendMessage(JSON.stringify({sub:"market.".concat(c,"_").concat(a,".kline.1day"),id:"".concat(c,"_").concat(a)}))}}catch(o){t.e(o)}finally{t.f()}}},{key:"handleOpen",value:function(){this.subscribe()}},{key:"sendMessage",value:function(e){this.refWebSocket.sendMessage(e)}},{key:"handleSwapOpen",value:function(){var e,t=new Set,c=Object(i.a)(this.state.future_contracts);try{for(c.s();!(e=c.n()).done;){var n=e.value;t.add(n.symbol)}}catch(d){c.e(d)}finally{c.f()}var s,a=Object(i.a)(t);try{for(a.s();!(s=a.n()).done;){var o=s.value,r="".concat(o,"-USD"),l="market.".concat(r,".kline.1day");this.sendMessageSwap(JSON.stringify({sub:l}))}}catch(d){a.e(d)}finally{a.f()}}},{key:"sendMessageSwap",value:function(e){this.ws_swap.sendMessage(e)}},{key:"handleSwapReceive",value:function(e){var t=this;e.arrayBuffer().then((function(e){var c=y.inflate(e,{to:"string"}),n=JSON.parse(c);if(n.ping)t.sendMessageSwap(JSON.stringify({pong:n.ping}));else if(n.tick){var s=n.ch.match(/market\.([\w]+)\-([\w+]+)\.kline\..*/);if(s){var a=s[1];console.log(a),t.updatePrice(a,n.tick)}console.log(n)}else console.log(c)}))}},{key:"render",value:function(){var e=this,t=(this.state.symbols,this.state.future_contracts);return Object(p.jsxs)("div",{children:[Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"Symbol"}),Object(p.jsx)("th",{children:"LastPrice"}),Object(p.jsx)("th",{children:"Spot"}),Object(p.jsx)("th",{children:"Spread Rate"})]})}),Object(p.jsx)("tbody",{children:t.map((function(t,c){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:t.contract_code}),Object(p.jsxs)("td",{children:[e.state.prices[t.contract_code]," (",(e.state.prices[t.contract_code]/e.state.openPrices[t.contract_code]*100-100).toFixed(2),")"]}),Object(p.jsx)("td",{children:e.state.prices[t.symbol]}),Object(p.jsx)("td",{children:(e.state.prices[t.contract_code]/e.state.prices[t.symbol]).toFixed(4)})]},t.contract_code)}))})]}),Object(p.jsx)(f.a,{url:"wss://api.btcgateway.pro/ws",onMessage:this.handleData.bind(this),debug:!0,onOpen:this.handleOpen.bind(this),ref:function(t){e.refWebSocket=t}}),Object(p.jsx)(f.a,{url:"wss://api.btcgateway.pro/swap-ws",onMessage:this.handleSwapReceive.bind(this),debug:!0,onOpen:this.handleSwapOpen.bind(this),ref:function(t){e.ws_swap=t}})]})}}]),c}(n.Component),g=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,19)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;c(e),n(e),s(e),a(e),o(e)}))};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(j,{})}),document.getElementById("root")),g()}},[[18,1,2]]]);
//# sourceMappingURL=main.5761fc72.chunk.js.map